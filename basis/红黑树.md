# 红黑树

###平衡二叉查找树

平衡二叉树严格定义：二叉树中任意一个节点的左右子树的高度不能相差为1.

很多平衡二叉查找树其实并没有满足严格的定义，比如红黑树。发明平衡二叉查找树的初衷是解决普通二叉查找树在频繁的插入、删除等动态更新的情况下，出现时间复杂度退化的问题。

平衡的意思是说让整棵树看起来比较对称，比较平衡，不要出现一边很高、一边很矮的情况。这样能让整棵树的高度相对低一些，相应的插入、删除、查找的效率高一些。

### 红黑树(Read-Black Tree)

平衡二叉查找树其实有很多，比如，Splay Tree(伸展树)、Treap(树堆)等，但是我们听到的平衡二叉查找树基本都是红黑树。甚至有的时候默认平衡二叉查找树就是红黑树。


红黑树是一种不严格的平衡二叉查找树。它的节点一类被标记为黑色，一类被标记为红色。除此之外，一颗红黑树还要满足如下的要求：

- 根节点是黑色的
- 每个叶子节点都是黑色的空节点(叶子节点不存储数据)
- 任何相邻的节点不能同时为红色(红色节点是被黑色节点隔开的)
- 每个节点，从该节点到达其可达叶子节点的所有路劲，都包含相同数目的黑色节点。

叶子节点都是黑色的空节点，主要是为了简化红黑树的代码实现而设置的。

红黑树是近似平衡的，等价为性能不会退回的太严重。

完全二叉树的高度 近似为 long n，红黑树的高度近似 2long n。这样的结果不够精确，实际上红黑树的性能更好。

前面的树堆，伸展树无法避免极端情况下时间复杂度的退化。AVL树是一种高度平衡的平衡二叉树，查找效率非常高，但是付出的代价就是插入、删除非常耗时，红黑树在维护成本上要比AVL 树低。红黑树的查找、插入、删除各种操作性能都比较稳定，所以使用的多。


