### 哈希算法

定义：将任意长度的二进制串映射为固定长度的二进制串，映射的规则就是**哈希算法**。映射后得到的二进制串就是**哈希值**。

总结下一个优秀的哈希算法需要满足的几点要求：

- 从哈希值不能反向推导出原始数据。(所以哈希算法也叫单向哈希算法)
- 对输入的数据非常敏感，哪怕原始数据只改变了一个Bit，最后得到的哈希值也大不相同。
- 散列冲突的概率要很小，对于不同的原始数据，哈希值相同的概率非常小。
- 哈希算法的执行效率要尽量高效，针对较长的文本，也能快速地计算出哈希值。

著名的哈希算法有很多,比如MD5、SHA等。

哈希算法的应用也有很多,比如：安全加密、唯一标识、数据校验、散列函数、负载均衡、数据分片、分布式存储等。

### 安全加密

最常用于加密的哈希算法是MD5(消息摘要算法)和SHA(安全散列算法)，也有其他的安全加密算法比如DES和AES。

对于加密算法来说，有两点格外重要：一是很难根据哈希值反向推导出原始数据，二是散列冲突的概率要很小。

没有绝对安全的加密，越复杂、越难破解的加密算法需要计算的时间也越长。实际开发中，需要权衡破解难度和计算时间来决定使用哪种加密算法。

### 唯一标识

比如在海量的图库中，搜索一张图片是否存在。我们可以给每一个图片取一个唯一的标识，或者说信息摘要。这个信息摘要可以用哈希算法来计算。</br>为了提高效率，可以把每个图片的唯一标识和相对应的文件的路径信息都存储在散列表中。

### 数据校验

比如校验下载的文件是否被修改、破坏，下载前对文件取哈希值，下载后再取哈希值去比对

### 散列函数

实际上，散列函数也是哈希算法的一种应用

散列函数对散列冲突的要求低了很多。即便出现冲突，只要不是特变的严重，我们都可以通过开放寻址法和链表法来解决。</br>
散列函数对于散列算法计算得到的值是否能反向解密也并不关心。更加关注的是散列后的值是否能平均分布。除此之外，散列函数的快慢，也会影响散列表的性能，所以，散列函数用的散列算法一般都比较简单，比较追求效率。

### 负载均衡

我们知道负载均衡的算法有很多，比如轮询、随机、加权轮询等。那如何实现一个会话粘滞的负载均衡算法？就是说在同一个客户端上，在一次会话中的所有请求都路由到 同一个服务器上。</br>
最直接的做法是维护一张映射关系表，这张表是客户端IP（或者会话ID）与服务器编号的映射关系。弊端是如果客户端较多，映射表可能会很大，比较浪费内存；客户端上线、下线、服务器扩容、缩容都会导致映射失效，维护的成本也很大。

我们可以通过哈希算法，对客户端IP或者会话ID计算哈希值，然后将哈希值与服务器列表大小进行取模运算，最终得到的值就是应该被路由到的服务器编号。

就是利用哈希算法替代映射表。

### 数据分片

可以先对数据进行分片，然后采用多台机器处理的办法，来提高处理速度。

数据分片：比如计算出数据的哈希值，再与n台机器的数量n取模，得到的值就是数据应该被那台机器进行处理。

可以突破单机资源的限制

### 分布式存储

分布式存储也可以借助数据分片的思想，但是数据增多，机器扩容，，这时候就比较麻烦了。数据都要重新计算哈希，然后搬移到正确的机器上。相当于缓存一下全部都失效了。这时候，就用到了一致性哈希算法。

可以解决 分布式系统的扩容、缩容导致数据大量搬移的难题。

### 字典攻击

用户信息被“脱库”，黑客虽然拿到的是加密后的密文，但可以用“猜"的形式来破解。这是因为有些用户的密码太简单。比如很多人用123456、000000这样的简单数字做密码，很容易就被猜中。

针对字典攻击，我们就需要维护一个常用的密码字典表，把字典中的每个密码用哈希算法计算哈希值，然后拿哈希值和脱库后的密文比对。如果相同，基本就可以认为，这个加密后的密码就是对应的字典中的那个明文密码。</br>
处理方法就是我们可以引入一个**盐**，跟用户的密码组合在一起，增加密码的复杂度。我们拿组合之后的字符串来做哈希算法加密，将它存储到数据库中，进一步增加破解的难度。