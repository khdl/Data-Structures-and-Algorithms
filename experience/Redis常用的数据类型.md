# Redis常用的数据类型

Redis是一种键值非关系型数据库。通过键来查询值，主要是作为内存数据库来使用，但也支持数据存磁盘中。

Redis中，键的数据类型是字符串，但值的类型有很多，常用的有字符串、列表、字典、集合、有序集合。

字符串就是对应的字符串，不多说。

### 列表(list)

列表这种数据结构支持存储一组数据。这种数据类型对应两种实现方法，一种是压缩列表，一种是双向循环列表。

当列表中存储的数据量较小的时候，列表可以采用压缩列表的方式实现，具体满足如下两个条件：

- 列表中保存的单个数据小于64个字节
- 列表中数据的个数小于512个

压缩列表类似数组，但是允许存储大小不同的数据来节省内存。因为用的连续的内存空间，所以读取非常高效。

不满足上面的条件时就只能用双向循环链表这种数据了。


### 字典(hash)

字典类型用来存储一组数据对。每个数据对又包含键值两部分。字典类型也有两种方式，一种是压缩列表，一种是散列表。

只有存储的数据量比较小的时候，才用压缩列表来实现字典，条件如下：

- 字典中保存的键和值大小都要小于64个字节
- 字典红键值对的个数要小于512个

不满足上面的条件就用散列表来实现字典类型。对于哈希冲突，Redis使用链表法来解决，支持散列表的动态扩容、缩容。


### 集合(set)

集合这种数据类型用来存储一组不重复的数据。也有两种实现方法：一种是基于有序数组，一种是基于散列表。

满足如下条件使用有序数组：

- 存储的数据都是整数
- 存储的数据个数小于512个

不满足上面条件时就用散列表来存储数据

### 有序集合(sortedset)

有序集合的实现方式有跳表

满足一下条件就用压缩列表：

- 所有的数据大小都小于64字节
- 元素个数小于128个


### 数据结构持久化

数据结构的持久化简单的理解就是把数据存储到磁盘

- 清除原有的存储结构，只将数据存储到磁盘。Redis就是采用的这种思路，但是从磁盘还原到内存数据量大时耗时就不可忽视了。
- 保留数据的原有存储格式，将数据按照原有的格式存储到磁盘中。